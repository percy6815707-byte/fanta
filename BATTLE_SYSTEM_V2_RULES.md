# Battle System V2 Rules (Draft)

## Core
- Battle runs in fixed ticks (`baseTick = 0.2s`) with speed multiplier (`1x/2x/4x`).
- Each side fields 3 spell units in order.
- A unit acts through auto-casting equipped spells when trigger, mana, and cooldown are valid.

## Spell Unit Lifecycle
- If a unit is destroyed, the next unit enters with a fresh state.
- Nothing transfers from a destroyed unit.

## Winner Carryover (Unit-to-Unit)
- If a unit defeats the enemy unit and remains alive:
- Health is preserved.
- Mana is treated like a buff and is reduced immediately:
  - `currentMana = floor(currentMana / 2)`
- Buff/debuff remaining duration is reduced immediately:
  - `remainingDuration = floor(remainingDuration / 2)`
- Cooldowns remain as-is.

## Mana
- Mana has no storage cap.
- No default passive mana regen.
- Mana is generated by spell effects, core passives, and conditions.

## Spell Design Constraints
- Circle = grid slot cost.
- Circle tier intent:
  - 1-circle: fast/basic
  - 2-circle: core tools
  - 3-circle: tactical pivots
  - 4-circle: strong
  - 5-circle: board/state swing
- Avoid stat inflation:
  - keep damage/heal/shield numbers low and readable
  - prioritize timing/control/special effects over large multipliers

## Shared Pool Rule
- Player and enemy use the same spell pool.
- Enemy spell grid should be visible for build-reading gameplay.

## Current Canon Spell Pool
- Source of truth: `spell_catalog_v2.json`
- Composition per color:
  - 1-circle: 4 spells
  - 2-circle: 3 spells
  - 3-circle: 2 spells
  - 4-circle: 1 spell
  - 5-circle: 1 spell
